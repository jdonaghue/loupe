!function(a,b){function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(a,c)||(a[c]=b[c]);return a}function d(a,b){try{for(var d in b)Object.prototype.hasOwnProperty.call(a,d)||Object.defineProperty(a.prototype,d,{value:b[d]})}catch(e){c(a.prototype,b)}}function e(a,b){var c=0;for(var d in a){if(b(a[d],d,c)===!1)break;c++}}function f(a){return"function"==typeof a}function g(){}function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(b,c)}function i(){var a=Math.round(256*Math.random()),b=Math.round(256*Math.random()),c=Math.round(256*Math.random());return"rgb("+a+","+b+","+c+")"}function j(a){switch(a){case"d":return m;case"fill":return q;case"transform":return v;default:return z}}function k(a){switch(a){case"d":return n;case"fill":return r;case"transform":return w;default:return A}}function l(a){switch(a){case"d":return o;case"fill":return s;case"transform":return x;default:return B}}function m(a,b){return p(a,b,"add")}function n(a,b){return p(a,b,"sub")}function o(a,b){return p(a,b,"mult")}function p(a,b,c){if(a){var d=a.split(/[a-zA-Z]+/g),e=a.split(/[0-9,.\-]+/g),f=a.split(/[0-9,.\-]+/g);if(d.shift(),d.pop(),isNaN(b)){var g=b.split(/[a-zA-Z]+/g),h=b.split(/[0-9,.\-]+/g);if(g.shift(),g.pop(),g.length!=d.length||h.length!=e.length)return a;for(var i=0,j=d.length;j>i;i++){var k=d[i].split(","),l=g[i].split(","),m=f.shift().toUpperCase();if(k.length!=l.length)return a;for(var n=0;n<k.length;n++)"add"==c?k[n]=1*k[n]+1*l[n]:"sub"==c?k[n]=1*k[n]-1*l[n]:"mult"==c?k[n]=k[n]*l[n]:"divide"==c&&(k[n]=k[n]/l[n]),"A"!=m||3!=n&&4!=n||(k[n]=k[n]>=.5?1:0);d[i]=k.join(",")}}else for(var i=0,j=d.length;j>i;i++){for(var k=d[i].split(","),m=f.shift().toUpperCase(),n=0;n<k.length;n++)"add"==c?k[n]=1*k[n]+1*b:"sub"==c?k[n]=1*k[n]-1*b:"mult"==c?k[n]=k[n]*b:"divide"==c&&(k[n]=k[n]/b),"A"!=m||3!=n&&4!=n||(k[n]=k[n]>=.5?1:0);d[i]=k.join(",")}a="";for(var o=0,p=e.length;p>o;o++)a+=e[o]+(d.length>0?d.shift():"")}return a}function q(a,b){return t(a,b,"add")}function r(a,b){return t(a,b,"sub")}function s(a,b){return t(a,b,"mult")}function t(a,b,c){return a=T[a]||a,b=T[b]||b,0==a.indexOf("rgb")?(a=a.substring(4,a.length-1),a=a.split(",")):a=u(a),isNaN(b)?0==b.indexOf("rgb")?(b=b.substring(4,b.length-1),b=b.split(",")):b=u(b):b=[b,b,b],"add"==c?(a[0]=1*a[0]+1*b[0],a[1]=1*a[1]+1*b[1],a[2]=1*a[2]+1*b[2]):"sub"==c?(a[0]=1*a[0]-1*b[0],a[1]=1*a[1]-1*b[1],a[2]=1*a[2]-1*b[2]):"mult"==c?(a[0]=a[0]*b[0],a[1]=a[1]*b[1],a[2]=a[2]*b[2]):"divide"==c&&(a[0]=a[0]/b[0],a[1]=a[1]/b[1],a[2]=a[2]/b[2]),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),rgb="rgb("+a.join(",")+")"}function u(a){var b=a.match(/([a-zA-Z0-9]{1})/g);3==b.length&&(b.splice(1,0,b[0]),b.splice(2,0,b[2]),b.splice(4,0,b[4]));var c=(parseInt(b[0],16)+1)*(parseInt(b[1],16)+1),d=(parseInt(b[2],16)+1)*(parseInt(b[3],16)+1),e=(parseInt(b[4],16)+1)*(parseInt(b[5],16)+1);return[c,d,e]}function v(a,b){return y(a,b,"add")}function w(a,b){return y(a,b,"sub")}function x(a,b){return y(a,b,"mult")}function y(a,b,c){var d=a.substring(0,a.indexOf("(")),e=a.substring(a.indexOf("(")+1,a.length-1);if(e=e.split(","),isNaN(b)){var f=(b.substring(0,b.indexOf("(")),b.substring(b.indexOf("(")+1,b.length-1));f=f.split(",");for(var g=0,h=e.length;h>g;g++)"add"==c?e[g]=1*e[g]+1*f[g]:"sub"==c?e[g]=1*e[g]-1*f[g]:"mult"==c?e[g]=e[g]*f[g]:"divide"==c&&(e[g]=e[g]/f[g])}else for(var g=0,h=e.length;h>g;g++)"add"==c?e[g]=1*e[g]+b:"sub"==c?e[g]=1*e[g]-b:"mult"==c?e[g]=e[g]*b:"divide"==c&&(e[g]=e[g]/b);return d+"("+e.join(",")+")"}function z(a,b){return a+b}function A(a,b){return a-b}function B(a,b){return a*b}function C(a,b,c,d){return setInterval(function(){a.apply(c,b)},d||10)}function D(a,b,c){clearInterval(a),b&&b.apply(null,c)}function E(a){return a}function F(a){switch(a){case"linear":return E}return E}function G(a,b){var c=j(b.prop),d=k(b.prop),e=l(b.prop),f=d(b.stop,b.start),g=0,h=0,i=C(function(a,d){g=F(self.animate_method||b.animate_method)(h/b.duration),H(a,d,c(b.start,e(f,g))),h+=10,h>b.duration&&D(i,b.callback,b.callback_args)},[a,b.prop,b.stop],null,10);return i}function H(a,b,c,d){return c?(d?a.setAttributeNS(d,b,c+""):a.setAttribute(b,c+""),void 0):d?a.getAttributeNS(d,b):a.getAttribute(b)}function I(a,b){var c=Q.createElementNS(a,b.tag);for(var d in b)"tag"!=d&&"other"!=d&&"original"!=d&&H(c,d,b[d]);return c}function J(a,b){return a.metrics={},a.metrics.sum=0,b="function"==typeof b?b:function(a){return a},e(a,function(c,d){"metrics"!=d&&(a.metrics.sum+=b(c))}),a.metrics.avg=a.metrics.total/a.length,a}function K(a){var b=[];a.analyzed_data.length>0?e(a.dom,function(){var d=[];e(a.shapes,function(b){var f=[];e(a.analyzed_data,function(a,d){if("metrics"!=d&&"length"!=d){var g={};e(b,function(a,b){g[b]="object"==typeof a?c({},a):a}),f.push(g)}}),d.push(f)}),b.push(d)}):e(a.dom,function(){var d=[],f=[];e(a.shapes,function(a){var b={};e(a,function(a,d){b[d]="object"==typeof a?c({},a):a}),f.push(b)}),d.push(f),b.push(d)}),a.queue=b}function L(a,b,c,d,g,h){var i;a.from=a.from||{},e(a,function(b,c){"other"!=c&&"from"!=c&&(a.from[c]=a.from[c]||b)}),"pie"==a._tag?a=M(a,b,c,d,h):e(g,function(b,d){i=O(a.tag),a[i[d]]=f(b)?b(a[i[d]],c,h):l(i[d])(a[i[d]],c)})}function M(a,b,c,d){var e=Math.PI,f=e/180,g=a.r,h=a.cx,j=a.cy,k=b&&b.angleEnd?b.angleEnd:0,l=k+360*c/d.metrics.sum,m=h+g*Math.cos(-k*f),n=h+g*Math.cos(-l*f),o=j+g*Math.sin(-k*f),p=j+g*Math.sin(-l*f);return a.angleStart=k,a.angleEnd=l,a.d=["M"+h,j+"L"+m,o+"A"+g,g,0,+(l-k>180),0,n,p+"z"].join(","),a.from.d=a.from.d.split(","),a.from.d[5]=+(l-k>180),a.from.d=a.from.d.join(","),a.other.rainbow&&(a.fill=i()),a}function N(a){a.other.events=a.other.events||{},a.other.events.mouseover=function(a,b){var c=(b.other.hoverBounce.offset||b.other.hoverBounce)/10,d=b.cx*-1/10*c,e=b.cy*-1/10*c;b._currentAnimation=G(b._el,{prop:"transform",start:b._el.originalTransform||"matrix(1, 0, 0, 1, 0, 0)",stop:"matrix(1."+c+", 0, 0, 1."+c+", "+d+","+e+")",duration:b.other.hoverBounce.duration||200})},a.other.events.mouseout=function(a,b){b._currentAnimation&&D(b._currentAnimation),b._currentAnimation=G(b._el,{prop:"transform",start:H(b._el,"transform"),stop:"matrix(1, 0, 0, 1, 0, 0)",duration:b.other.hoverBounce.duration||200})}}function O(a){switch(a){case"circle":return V;case"rect":return W;case"path":return X}}var P=a,Q=b;Q.documentElement;var R="http://www.w3.org/2000/svg",S="1.1";P.loupe=function(a){if(!(this instanceof loupe)){var b=new loupe;return b.query(a),b.shapes=[],b.queue=[],b.data_points=[],b.analyzed_data=[],b}},d(loupe,{sEngine:peppy?peppy.query:g,query:function(a,b){return this.dom=this.sEngine(a,b),this}}),d(loupe,{on:function(){},un:function(){}});var T={white:"#FFFFFF",red:"#FF0000",black:"#000000",green:"#008000",yellow:"#ffff00",blue:"#0000ff"};d(loupe,{animate:function(a){var b=this;return b.animate_on=!0,b.animate_method="linear",b.animate_duration=200,a&&(b.animate_synchronous=a.synchronous||!1,b.animate_method=a.easing||"linear",b.animate_properties=a.props,b.animate_duration=a.duration||200),b}}),d(loupe,{data:function(a,b){var c=this;return b=b||{},c.data_points=b.replace?a:c.data_points.concat(a),c.analyzed_data=J(c.data_points,b.reader),c}}),d(loupe,{transform:function(a,b){var c=this,d={};return K(c),e(c.queue,function(f){e(f,function(f){e(f,function(e,f,g){switch(a){case"linear":L(e,d[e._tag||e.tag],c.analyzed_data[g],c.analyzed_data,b,g)}d[e._tag||e.tag]=e})})}),c}});var U={stroke:"stroke-width",strokeColor:"stroke",color:"fill"},V=c({centerX:"cx",centerY:"cy",radius:"r"},U);d(loupe,{circle:function(a){var b=this,c={tag:"circle",other:{}};for(var d in a){var e=V[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),K(b),b}});var W=c({xOffset:"cx",yOffset:"cy",radius:"r"},U);d(loupe,{rect:function(a){var b=this,c={tag:"rect",other:{}};for(var d in a){var e=W[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),K(b),b}});var X=c({centerX:"cx",centerY:"cy",radius:"r",d:"d"},U);d(loupe,{path:function(a){var b=this,c={tag:"path",other:{}};for(var d in a){var e=X[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),K(b),b}});var Y=c({centerX:"cx",centerY:"cy",radius:"r",d:"d"},U);d(loupe,{pie:function(a){var b=this,d={tag:"path",_tag:"pie",other:{}};for(var e in a){var f=Y[e];f?d[f]=a[e]:"from"==e?d.from=c({},a[e]):d.other[e]=a[e]}return d.d||(d.d="M0,0L0,0A0,0,0,0,0,0,0z"),d.other.hoverBounce&&N(d),b.shapes.push(d),K(b),b}}),d(loupe,{draw:function(){var a=this;return e(a.queue,function(b,c,d){e(b,function(b){e(b,function(b){var c=a.dom[d],f=a.sEngine("svg",c)[0];if(f||(f=I(R,{tag:"svg",version:S}),c.appendChild(f)),a.animate_on||b.other.animate){var g=I(R,b.from);f.appendChild(g),b._el=g,e(b.other.events,function(a,c){h(g,c,function(c){a(c,b)})}),e(b,function(c,d){d in{cx:null,cy:null,r:null,d:null,fill:null}&&G(g,{prop:d,start:b.from[d]||b[d]||0,stop:b[d],duration:a.animate_duration||b.other.animate_duration||200,animate_method:b.other.animate_method})})}else{var g=I(R,b);f.appendChild(g),b._el=g,e(b.other.events,function(a,c){h(g,c,function(c){a(c,b)})})}})})}),a}})}(window,document);
/*
//@ sourceMappingURL=dist/loupe.min.map
*/