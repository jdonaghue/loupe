!function(a,b){function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(a,c)||(a[c]=b[c]);return a}function d(a,b){try{for(var d in b)Object.prototype.hasOwnProperty.call(a,d)||Object.defineProperty(a.prototype,d,{value:b[d]})}catch(e){c(a.prototype,b)}}function e(a,b){var c=0;for(var d in a){if(b(a[d],d,c)===!1)break;c++}}function f(a){return"function"==typeof a}function g(){}function h(a){switch(a){case"d":return k;case"fill":return o;default:return t}}function i(a){switch(a){case"d":return l;case"fill":return p;default:return u}}function j(a){switch(a){case"d":return m;case"fill":return q;default:return v}}function k(a,b){return n(a,b,"add")}function l(a,b){return n(a,b,"sub")}function m(a,b){return n(a,b,"mult")}function n(a,b,c){if(a){var d=a.split(/[a-zA-Z]+/g),e=a.split(/[0-9,.\-]+/g);if(d.shift(),d.pop(),isNaN(b)){var f=b.split(/[a-zA-Z]+/g),g=b.split(/[0-9,.\-]+/g);if(f.shift(),f.pop(),f.length!=d.length||g.length!=e.length)return a;for(var h=0,i=d.length;i>h;h++){var j=d[h].split(","),k=f[h].split(",");if(j.length!=k.length)return a;for(var l=0;l<j.length;l++)"add"==c?j[l]=1*j[l]+1*k[l]:"sub"==c?j[l]=1*j[l]-1*k[l]:"mult"==c?j[l]=j[l]*k[l]:"divide"==c&&(j[l]=j[l]/k[l]);d[h]=j.join(",")}}else for(var h=0,i=d.length;i>h;h++){for(var j=d[h].split(","),l=0;l<j.length;l++)"add"==c?j[l]=1*j[l]+1*b:"sub"==c?j[l]=1*j[l]-1*b:"mult"==c?j[l]=j[l]*b:"divide"==c&&(j[l]=j[l]/b);d[h]=j.join(",")}a="";for(var m=0,n=e.length;n>m;m++)a+=e[m]+(d.length>0?d.shift():"")}return a}function o(a,b){return r(a,b,"add")}function p(a,b){return r(a,b,"sub")}function q(a,b){return r(a,b,"mult")}function r(a,b,c){return a=L[a]||a,b=L[b]||b,0==a.indexOf("rgb")?(a=a.substring(4,a.length-1),a=a.split(",")):a=s(a),isNaN(b)?0==b.indexOf("rgb")?(b=b.substring(4,b.length-1),b=b.split(",")):b=s(b):b=[b,b,b],"add"==c?(a[0]=1*a[0]+1*b[0],a[1]=1*a[1]+1*b[1],a[2]=1*a[2]+1*b[2]):"sub"==c?(a[0]=1*a[0]-1*b[0],a[1]=1*a[1]-1*b[1],a[2]=1*a[2]-1*b[2]):"mult"==c?(a[0]=a[0]*b[0],a[1]=a[1]*b[1],a[2]=a[2]*b[2]):"divide"==c&&(a[0]=a[0]/b[0],a[1]=a[1]/b[1],a[2]=a[2]/b[2]),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),rgb="rgb("+a.join(",")+")"}function s(a){var b=a.match(/([a-zA-Z0-9]{1})/g);3==b.length&&(b.splice(1,0,b[0]),b.splice(2,0,b[2]),b.splice(4,0,b[4]));var c=(parseInt(b[0],16)+1)*(parseInt(b[1],16)+1),d=(parseInt(b[2],16)+1)*(parseInt(b[3],16)+1),e=(parseInt(b[4],16)+1)*(parseInt(b[5],16)+1);return[c,d,e]}function t(a,b){return a+b}function u(a,b){return a-b}function v(a,b){return a*b}function w(a,b,c,d){return setInterval(function(){a.apply(c,b)},d||10)}function x(a,b,c){clearInterval(a),b&&b.apply(null,c)}function y(a){return a}function z(a){switch(a){case"linear":return y}return y}function A(a,b){var c=h(b.prop),d=i(b.prop),e=j(b.prop),f=d(b.stop,b.start),g=0,k=0,l=w(function(a,d){g=z(self.animate_method||b.animate_method)(k/b.duration),B(a,d,c(b.start,e(f,g))),k+=10,k>b.duration&&x(l,b.callback,b.callback_args)},[a,b.prop,b.stop],null,10)}function B(a,b,c,d){d?a.setAttributeNS(d,b,c+""):a.setAttribute(b,c+"")}function C(a,b){var c=I.createElementNS(a,b.tag);for(var d in b)"tag"!=d&&"other"!=d&&"original"!=d&&B(c,d,b[d]);return c}function D(a){return a}function E(a){var b=[];a.analyzed_data.length>0?e(a.dom,function(){var c=[];e(a.analyzed_data,function(){var b=[];e(a.shapes,function(a){var c={};e(a,function(a,b){c[b]=a}),b.push(c)}),c.push(b)}),b.push(c)}):e(a.dom,function(){var c=[],d=[];e(a.shapes,function(a){var b={};e(a,function(a,c){b[c]=a}),d.push(b)}),c.push(d),b.push(c)}),a.queue=b}function F(a,b,c,d){var g;a.original={},e(a,function(b,c){"other"!=c&&(a.original[c]=b)}),e(c,function(c,e){g=G(a.tag),a[g[e]]=f(c)?c(a[g[e]],b,d):j(g[e])(a[g[e]],b)})}function G(a){switch(a){case"circle":return N;case"rect":return O;case"path":return P}}var H=a,I=b;I.documentElement;var J="http://www.w3.org/2000/svg",K="1.1";H.loupe=function(a){if(!(this instanceof loupe)){var b=new loupe;return b.query(a),b.shapes=[],b.queue=[],b.data_points=[],b.analyzed_data=[],b}},d(loupe,{sEngine:peppy?peppy.query:g,query:function(a,b){return this.dom=this.sEngine(a,b),this}});var L={white:"#FFFFFF",red:"#FF0000",black:"#000000",green:"#008000",yellow:"#ffff00"};d(loupe,{animate:function(a){var b=this;return b.animate_on=!0,b.animate_method="linear",b.animate_duration=200,a&&(b.animate_synchronous=a.synchronous||!1,b.animate_method=a.easing||"linear",b.animate_properties=a.props,b.animate_duration=a.duration||200),b}}),d(loupe,{data:function(a,b){var c=this;return c.data_points=b&&b.replace?a:c.data_points.concat(a),c.analyzed_data=D(c.data_points),c}}),d(loupe,{transform:function(a,b){var c=this;return E(c),e(c.queue,function(d){e(d,function(d,f,g){e(d,function(d){switch(a){case"linear":F(d,c.analyzed_data[g],b,g)}})})}),c}});var M={stroke:"stroke-width",strokeColor:"stroke",color:"fill"},N=c({centerX:"cx",centerY:"cy",radius:"r"},M);d(loupe,{circle:function(a){var b=this,c={tag:"circle",other:{}};for(var d in a){var e=N[d];e?c[e]=a[d]:c.other[d]=a[d]}return b.shapes.push(c),E(b),b}});var O=c({xOffset:"cx",yOffset:"cy",radius:"r"},M);d(loupe,{rect:function(a){var b=this,c={tag:"rect",other:{}};for(var d in a){var e=O[d];e?c[e]=a[d]:c.other[d]=a[d]}return b.shapes.push(c),E(b),b}});var P=c({d:"d"},M);d(loupe,{path:function(a){var b=this,c={tag:"path",other:{}};for(var d in a){var e=P[d];e?c[e]=a[d]:c.other[d]=a[d]}return b.shapes.push(c),E(b),b}}),d(loupe,{draw:function(){var a=this;return e(a.queue,function(b,c,d){e(b,function(b){e(b,function(b){var c=a.dom[d],f=a.sEngine("svg",c)[0];if(f||(f=C(J,{tag:"svg",version:K}),c.appendChild(f)),a.animate_on||b.other.animate){var g=C(J,b.original);f.appendChild(g),e(b,function(c,d){d in{cx:null,cy:null,r:null,d:null,fill:null}&&A(g,{prop:d,start:b.original[d],stop:b[d],duration:a.animate_duration||b.other.animate_duration||200,animate_method:b.other.animate_method})})}else{var g=C(J,b);f.appendChild(g)}})})}),a}})}(window,document);
/*
//@ sourceMappingURL=dist/loupe.min.map
*/