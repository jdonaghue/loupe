!function(a,b){function c(a){return"function"==typeof a}function d(a){return a instanceof Array}function e(){}function f(a,b,c){for(var d in b)(c||!Object.prototype.hasOwnProperty.call(a,d))&&(a[d]=b[d]);return a}function g(a,b){try{for(var c in b)Object.prototype.hasOwnProperty.call(a,c)||Object.defineProperty(a.prototype,c,{value:b[c]})}catch(d){f(a.prototype,b)}}function h(a,b){var c=0;for(var d in a){if(b(a[d],d,c)===!1)break;c++}}function i(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(b,c)}function j(){var a=Math.round(256*Math.random()),b=Math.round(256*Math.random()),c=Math.round(256*Math.random());return"rgb("+a+","+b+","+c+")"}function k(a){switch(a){case"d":return o;case"stroke":case"fill":return u;case"transform":return C}return I}function l(a){switch(a){case"d":return p;case"stroke":case"fill":return v;case"transform":return D}return J}function m(a){switch(a){case"d":return q;case"stroke":case"fill":return w;case"transform":return E}return K}function n(a){switch(a){case"d":return s;case"stroke":case"fill":return y;case"transform":return G}return M}function o(a,b){return t(a,b,"add")}function p(a,b){return t(a,b,"sub")}function q(a,b){return t(a,b,"mult")}function r(a,b){return t(a,b,"divide")}function s(){}function t(a,b,c){if(a){var d=a.split(/[a-zA-Z]+/g),e=a.split(/[0-9, .\-]+/g),f=a.split(/[0-9, .\-]+/g);if(d.shift(),d.pop(),isNaN(b))if(b.x&&b.y);else{var g=b.split(/[a-zA-Z]+/g),h=b.split(/[0-9, .\-]+/g);if(g.shift(),g.pop(),g.length!=d.length||h.length!=e.length)return a;for(var i=0,j=d.length;j>i;i++){var k=d[i].split(/,|\s/g),l=g[i].split(/,|\s/g),m=f.shift().toUpperCase();if(k.length!=l.length)return a;for(var n=0;n<k.length;n++)"add"==c?k[n]=1*k[n]+1*l[n]:"sub"==c?k[n]=1*k[n]-1*l[n]:"mult"==c?k[n]=k[n]*l[n]:"divide"==c&&(k[n]=k[n]/l[n]),"A"!=m||3!=n&&4!=n||(k[n]=k[n]>=.5?1:0);d[i]=k.join(",")}}else for(var i=0,j=d.length;j>i;i++){for(var k=d[i].split(/,|\s/g),m=f.shift().toUpperCase(),n=0;n<k.length;n++)"add"==c?k[n]=1*k[n]+1*b:"sub"==c?k[n]=1*k[n]-1*b:"mult"==c?k[n]=k[n]*b:"divide"==c&&(k[n]=k[n]/b),"A"!=m||3!=n&&4!=n||(k[n]=k[n]>=.5?1:0);d[i]=k.join(",")}a="";for(var o=0,p=e.length;p>o;o++)a+=e[o]+(d.length>0?d.shift():"")}return a}function u(a,b){return z(a,b,"add")}function v(a,b){return z(a,b,"sub")}function w(a,b){return z(a,b,"mult")}function x(a,b){return z(a,b,"divide")}function y(a,b){return a=A(a),b=A(b),a[0]>b[0]?1:a[0]<b[0]?-1:a[1]>b[1]?1:a[1]<b[1]?-1:a[2]>b[2]?1:a[2]<b[2]?-1:0}function z(a,b,c){return a=A(a),b=A(b),"add"==c?(a[0]=a[0]+b[0],a[1]=a[1]+b[1],a[2]=a[2]+b[2]):"sub"==c?(a[0]=a[0]-b[0],a[1]=a[1]-b[1],a[2]=a[2]-b[2]):"mult"==c?(a[0]=a[0]*b[0],a[1]=a[1]*b[1],a[2]=a[2]*b[2]):"divide"==c&&(a[0]=a[0]/b[0],a[1]=a[1]/b[1],a[2]=a[2]/b[2]),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),rgb="rgb("+a.join(",")+")"}function A(a){return a=cb[a]||a,isNaN(a)?0==a.indexOf("rgb")?(a=a.substring(4,a.length-1),a=a.split(","),a=[1*a[0],1*a[1],1*a[2]]):a=B(a):a=[1*a,1*a,1*a],a}function B(a){var b=a.match(/([a-fA-F0-9]{1})/g);3==b.length&&(b.splice(1,0,b[0]),b.splice(2,0,b[2]),b.splice(4,0,b[4]));var c=parseInt(b[0]+b[1],16),d=parseInt(b[2]+b[3],16),e=parseInt(b[4]+b[5],16);return[c,d,e]}function C(a,b){return H(a,b,"add")}function D(a,b){return H(a,b,"sub")}function E(a,b){return H(a,b,"mult")}function F(a,b){return H(a,b,"divide")}function G(){}function H(a,b,c){var d=a.substring(0,a.indexOf("(")),e=a.substring(a.indexOf("(")+1,a.length-1);if(e=e.split(","),isNaN(b)){var f=(b.substring(0,b.indexOf("(")),b.substring(b.indexOf("(")+1,b.length-1));f=f.split(",");for(var g=0,h=e.length;h>g;g++)"add"==c?e[g]=1*e[g]+1*f[g]:"sub"==c?e[g]=1*e[g]-1*f[g]:"mult"==c?e[g]=e[g]*f[g]:"divide"==c&&(e[g]=e[g]/f[g])}else for(var g=0,h=e.length;h>g;g++)"add"==c?e[g]=1*e[g]+b:"sub"==c?e[g]=1*e[g]-b:"mult"==c?e[g]=e[g]*b:"divide"==c&&(e[g]=e[g]/b);return d+"("+e.join(",")+")"}function I(a,b){return 1*a+1*b}function J(a,b){return 1*a-1*b}function K(a,b){return a*b}function L(a,b){return a/b}function M(a,b){return a>b?1:b>a?-1:0}function N(a,b,c,d){return setInterval(function(){a.apply(c,b)},d||10)}function O(a,b,c){clearInterval(a),b&&b.apply(null,c)}function P(a){return a}function Q(a){switch(a){case"linear":return P}return P}function R(a,b){var c=k(b.prop),d=l(b.prop),f=m(b.prop),g=n(b.prop),h=d(b.stop,b.start),i=g(b.stop,b.start),j=b.changeHook||e,o=0,p=0,q=N(function(a,d,e){o=Q(self.animate_method||b.animate_method)(p/b.duration);var k=c(b.start,f(h,o));p+=1,j(a,d,k,o),p>b.duration||(i>=0?g(k,e)>=0:g(k,e)<0)?(b.start==e?S(a,d,e):0==g(k,e)&&S(a,d,k),O(q,b.callback,b.callback_args)):S(a,d,k)},[a,b.prop,b.stop],null,1);return q}function S(a,b,c,d){return c?(d?a.setAttributeNS(d,b,c+""):a.setAttribute(b,c+""),void 0):d?a.getAttributeNS(d,b):a.getAttribute(b)}function T(a,b,c){c?a.removeAttributeNS(c,b):a.removeAttribute(b)}function U(a,b,c){var d=_.createElementNS(a,b.tag);c&&"string"==typeof c&&(d.textContent=c);for(var e in b)"tag"!=e&&"other"!=e&&"original"!=e&&S(d,e,b[e]);return d}function V(a,b,c){"object"==typeof b?h(b,function(b,c){a.style[c]=b}):a.style[b]=c}function W(a,b){return b.metrics={},b.metrics.sum=0,h(b,function(a,c){isNaN(c)||(isNaN(a)?a.index=c:b.metrics.sum+=a,b.metrics.max=b.metrics.max>a?b.metrics.max:a,b.metrics.min=b.metrics.min<a?b.metrics.min:a)}),b.metrics.sum&&(b.metrics.avg=b.metrics.sum/b.length),b}function X(a){var b=[];return a.analyzed_data.length>0?h(a.dom,function(c,e){var g=[];h(a.shapes,function(b,c){var i=[];h(a.analyzed_data,function(g,j){if(!isNaN(j)){var k={};h(b,function(a,b){k[b]="object"==typeof a?f(d(a)?[]:{},a):a}),k.data=g,k.dataIndex=g.index||j,k.originalData=a.original_data[k.dataIndex];var l=a.queue[e]?a.queue[e][c]?a.queue[e][c][j]:null:null;l&&a.queue[e][c].length==a.analyzed_data.length&&(k._el=l._el,k.from=k.from||{},h(l,function(a,b){k.from[b]=a})),i.push(k)}}),g.push(i)}),b.push(g)}):h(a.dom,function(){var c=[],e=[];h(a.shapes,function(a){var b={};h(a,function(a,c){b[c]="object"==typeof a?f(d(a)?[]:{},a):a}),e.push(b)}),c.push(e),b.push(c)}),b}function Y(a){a.analyzed_data.type&&"linear"!=a.analyzed_data.type||(a.queue=X(a))}function Z(a,b,d,e,g,i,j,k){var l,n=loupe[b._tag+"Transform"];c(i)?f(b,i(a,b,d,e,g,k),!0):n?f(b,n(a,b,d,e,g,k),!0):h(i,function(a,c){l=b.map;var d,f;"object"==typeof l[c]?(f=l[c].property,b[f]=l[c].value(a,b[f],e,g,k,b)):(f=l[c],d=b[f],b[f]=a?a(d,e,g,k,b):m(f)(d,e))})}var $=a,_=b;_.documentElement;var ab="http://www.w3.org/2000/svg",bb="1.1";$.loupe=function(a,b){if(!(this instanceof loupe)){var c=new loupe;return c.dom=d(a)?a:a.nodeName?[a]:c.query(a),c.shapes=[],c.queue=[],c.data_points=[],c.analyzed_data=[],b&&(c.width=b.width,c.height=b.height),c}},f(loupe,{override:f}),f(loupe,{extend:g}),g(loupe,{sEngine:a.peppy?peppy.query:void 0,query:function(a,b){return this.sEngine?this.sEngine(a,b):(b||_).querySelectorAll(a)}}),g(loupe,{clear:function(){var a=this;return h(a.queue,function(a){h(a,function(a){h(a,function(a){a._el&&(a._el.parentNode.removeChild(a._el),delete a._el)})})}),a}}),g(loupe,{on:function(){},un:function(){}});var cb={white:"#FFFFFF",red:"#FF0000",black:"#000000",green:"#00FF00",yellow:"#FFFF00",blue:"#0000FF"};f(loupe,{randomColor:j}),loupe.math=loupe.math||{},loupe.math.d={add:o,sub:p,mult:q,divide:r,compare:s},loupe.math=loupe.math||{},loupe.math.color={add:u,sub:v,mult:w,divide:x,compare:y},loupe.math=loupe.math||{},loupe.math.transform={add:C,sub:D,mult:E,divide:F,compare:G},loupe.math=loupe.math||{},loupe.math.numeric={add:I,sub:J,mult:K,divide:L,compare:M},f(loupe,{startTask:N,stopTask:O}),f(loupe,{animate:R}),f(loupe,{attr:S,removeAttr:T}),g(loupe,{data:function(a,b){b=b||{};var c=this,d=[],e="function"==typeof b.reader?b.reader:function(a){return{value:a}};return c.original_data=a,b.type&&"linear"!=b.type||(h(a,function(a){var c=e(a).value;b.interpolate&&h(c,function(a,d){b.interpolate[d]&&(c[d]=b.interpolate[d](a))}),d.push(c)}),c.data_points=b.replace?d:c.data_points.concat(d),c.analyzed_data=b.analyzer?b.analyzer(c,c.data_points):W(c,c.data_points),c.analyzed_data.type=b.type||"linear",c.analyzed_data.opts=b),c}}),f(loupe,{syncData:Y}),g(loupe,{transform:function(a,b){var c=this,d={};return Y(c),h(c.queue,function(e){h(e,function(e){h(e,function(e,f,g){switch(a){case"linear":Z(c,e,d[e._tag||e.tag],c.analyzed_data[g],c.analyzed_data,b,c.engine,g);break;case"tree":}d[e._tag||e.tag]=e})})}),c}}),g(loupe,{draw:function(a){var b=this;return b.engine=b.engine||"svg","svg"==b.engine?b.draw_svg(a):b}});var db={stroke:"stroke",strokeWidth:"stroke-width","stroke-width":"stroke-width",color:"fill",fill:"fill",transform:"transform","class":"class",style:"style"},eb={fill:"#FFF"};loupe.extend(loupe,{shape:function(a,b,c,d,e){var f=this;a.map=c;for(var g in b){var i=c[g];if(d&&g in d)d[g](a,b[g]);else if(i)a[i]=b[g];else if("from"==g)a.from=loupe.override({},b[g]);else if("events"==g){a.other.events={};for(var j in b[g]){var k=b[g][j];a.other.events[j]=k instanceof Array?k:[k]}}else a.other[g]=b[g]}return e&&h(e,function(b){b(a)}),f.shapes.push(a),Y(f),a}}),f(loupe,{shapeSvgMap:db,svgPropertyDefault:eb});var fb=f({x:"x",y:"y",dx:"dx",dy:"dy",textAnchor:"text-anchor",rotate:"rotate",textLength:"textLength",lengthAdjust:"lengthAdjust",content:"content",position:{property:"transform",value:function(a,b,c,d,e,f){return a?"translate("+a(b,c,d,e,f)+")":"translate("+b+")"}}},db);f(loupe,{textSvgMap:fb}),g(loupe,{text:function(a){var b=this,c={tag:"text",other:{}};return b.shape(c,a,fb,{position:function(a,b){a.transform="translate("+b+")"}}),b}});var gb=f({x1:"x1",x2:"x2",y1:"y1",y2:"y2"},db);f(loupe,{lineSvgMap:gb}),g(loupe,{line:function(a){var b=this,c={tag:"line",other:{}};return b.shape(c,a,gb),b}});var hb=f({centerX:"cx",centerY:"cy",cx:"cx",cy:"cy",r:"r",radius:"r"},db);f(loupe,{circleSvgMap:hb}),g(loupe,{circle:function(a){var b=this,c={tag:"circle",other:{}};return b.shape(c,a,hb),b}});var ib=f({points:"points"},db);f(loupe,{polylineSvgMap:ib}),g(loupe,{polyline:function(a){var b=this,c={tag:"polyline",other:{}};return b.shape(c,a,ib),b}});var jb=f({points:"points"},db);f(loupe,{polygonSvgMap:jb}),g(loupe,{polygon:function(a){var b=this,c={tag:"polygon",other:{}};return b.shape(c,a,jb),b}});var kb=f({x:"x",y:"y",rx:"rx",ry:"ry",width:"width",height:"height"},db);f(loupe,{rectSvgMap:kb}),g(loupe,{rect:function(a){var b=this,c={tag:"rect",other:{}};return b.shape(c,a,kb),b}});var lb=f({centerX:"cx",centerY:"cy",radius:"r",d:"d",moveTo:"M",arcTo:"A",lineTo:"L",curveTo:"C"},db);f(loupe,{pathSvgMap:lb}),g(loupe,{path:function(a){var b=this,c={tag:"path",other:{}};return c=b.shape(c,a,lb,null,[function(a){a.d||(a.d="",a.M&&(a.d="M"+a.M),a.A&&(a.d+="A"+a.A),a.L&&(a.d+="L"+a.L),a.C&&(a.d+="C"+a.C),a.d+="Z")}]),b}}),g(loupe,{draw_svg:function(a){var b=this;return h(b.queue,function(a){h(a,function(a){h(a,function(a){a.from&&h(a.from.currentAnimation,function(a){O(a)})})})}),h(b.queue,function(c,e,g){var j=b.dom[g],k=b.query("svg",j)[0];(b.width||b.height)&&V(j,{width:b.width||"auto",height:b.height||"auto"}),k||(k=U(ab,{tag:"svg",version:bb,width:b.width||"100%",height:b.height||"100%"}),j.appendChild(k)),h(c,function(c){h(c,function(c){if(c.ignore)return!0;if(a||c.other.animate){var e,g,j=a||(c.other?c.other.animate||b:b);c._el?(e=c._el,h(e.attributes,function(a){c.from[a.nodeName]=a.nodeValue}),g=f({},c.from)):(g=f({},c.from),h(g,function(a,b){d(a)&&(g[b]=a[c.dataIndex]||eb[b])}),h(c,function(a,b){g[b]||(g[b]=j.from&&void 0!=j.from[b]?j.from[b]:a||eb[b])}),e=U(ab,g),k.appendChild(e)),c._el=e,h(c.other.events,function(a,b){i(e,b,function(b){h(a,function(a){return a(b,c,c.originalData)})})}),c.currentAnimation=c.currentAnimation||{},h(c,function(a,b){if(j.from&&b in j.from||!j.from&&b in{cx:0,cy:0,r:0,d:0,fill:0,x:0,y:0,width:0,height:0,x1:0,x2:0,y1:0,y2:0}){var f,h;f=void 0!=g[b]?g[b]:d(c[b])?c[b][c.dataIndex]||c[b]:c[b],h=d(c[b])?c[b][c.dataIndex]:c[b],c.currentAnimation[b]=R(e,{prop:b,start:f||eb[b]||0,stop:h||eb[b]||0,duration:j.animate_duration||400,animate_method:j.animate_method,changeHook:j.changeHook})}})}else{h(c,function(a,b){d(a)&&(c[b]=a[c.dataIndex]||eb[b]||0)});var e=U(ab,c,c.content);k.appendChild(e),c._el=e,h(c.other.events,function(a,b){i(e,b,function(b){h(a,function(a){return a(b,c,c.originalData)})})})}})})}),b}})}(window,document);