!function(a,b){function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(a,c)||(a[c]=b[c]);return a}function d(a,b){try{for(var d in b)Object.prototype.hasOwnProperty.call(a,d)||Object.defineProperty(a.prototype,d,{value:b[d]})}catch(e){c(a.prototype,b)}}function e(a,b){var c=0;for(var d in a){if(b(a[d],d,c)===!1)break;c++}}function f(a){return"function"==typeof a}function g(a){return a instanceof Array}function h(){}function i(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(b,c)}function j(){var a=Math.round(256*Math.random()),b=Math.round(256*Math.random()),c=Math.round(256*Math.random());return"rgb("+a+","+b+","+c+")"}function k(a){switch(a){case"d":return o;case"fill":return t;case"transform":return A;default:return F}}function l(a){switch(a){case"d":return p;case"fill":return u;case"transform":return B;default:return G}}function m(a){switch(a){case"d":return q;case"fill":return v;case"transform":return C;default:return H}}function n(a){switch(a){case"d":return r;case"fill":return w;case"transform":return D;default:return I}}function o(a,b){return s(a,b,"add")}function p(a,b){return s(a,b,"sub")}function q(a,b){return s(a,b,"mult")}function r(){}function s(a,b,c){if(a){var d=a.split(/[a-zA-Z]+/g),e=a.split(/[0-9,.\-]+/g),f=a.split(/[0-9,.\-]+/g);if(d.shift(),d.pop(),isNaN(b)){var g=b.split(/[a-zA-Z]+/g),h=b.split(/[0-9,.\-]+/g);if(g.shift(),g.pop(),g.length!=d.length||h.length!=e.length)return a;for(var i=0,j=d.length;j>i;i++){var k=d[i].split(","),l=g[i].split(","),m=f.shift().toUpperCase();if(k.length!=l.length)return a;for(var n=0;n<k.length;n++)"add"==c?k[n]=1*k[n]+1*l[n]:"sub"==c?k[n]=1*k[n]-1*l[n]:"mult"==c?k[n]=k[n]*l[n]:"divide"==c&&(k[n]=k[n]/l[n]),"A"!=m||3!=n&&4!=n||(k[n]=k[n]>=.5?1:0);d[i]=k.join(",")}}else for(var i=0,j=d.length;j>i;i++){for(var k=d[i].split(","),m=f.shift().toUpperCase(),n=0;n<k.length;n++)"add"==c?k[n]=1*k[n]+1*b:"sub"==c?k[n]=1*k[n]-1*b:"mult"==c?k[n]=k[n]*b:"divide"==c&&(k[n]=k[n]/b),"A"!=m||3!=n&&4!=n||(k[n]=k[n]>=.5?1:0);d[i]=k.join(",")}a="";for(var o=0,p=e.length;p>o;o++)a+=e[o]+(d.length>0?d.shift():"")}return a}function t(a,b){return x(a,b,"add")}function u(a,b){return x(a,b,"sub")}function v(a,b){return x(a,b,"mult")}function w(a,b){return a=y(a),b=y(b),a[0]>b[0]||a[1]>b[1]||a[2]>b[2]?1:a[0]<b[0]||a[1]<b[1]||a[2]<b[2]?-1:0}function x(a,b,c){return a=y(a),b=y(b),"add"==c?(a[0]=1*a[0]+1*b[0],a[1]=1*a[1]+1*b[1],a[2]=1*a[2]+1*b[2]):"sub"==c?(a[0]=1*a[0]-1*b[0],a[1]=1*a[1]-1*b[1],a[2]=1*a[2]-1*b[2]):"mult"==c?(a[0]=a[0]*b[0],a[1]=a[1]*b[1],a[2]=a[2]*b[2]):"divide"==c&&(a[0]=a[0]/b[0],a[1]=a[1]/b[1],a[2]=a[2]/b[2]),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),rgb="rgb("+a.join(",")+")"}function y(a){return a=ab[a]||a,isNaN(a)?0==a.indexOf("rgb")?(a=a.substring(4,a.length-1),a=a.split(",")):a=z(a):a=[a,a,a],a}function z(a){var b=a.match(/([a-zA-Z0-9]{1})/g);3==b.length&&(b.splice(1,0,b[0]),b.splice(2,0,b[2]),b.splice(4,0,b[4]));var c=(parseInt(b[0],16)+1)*(parseInt(b[1],16)+1),d=(parseInt(b[2],16)+1)*(parseInt(b[3],16)+1),e=(parseInt(b[4],16)+1)*(parseInt(b[5],16)+1);return[c,d,e]}function A(a,b){return E(a,b,"add")}function B(a,b){return E(a,b,"sub")}function C(a,b){return E(a,b,"mult")}function D(){}function E(a,b,c){var d=a.substring(0,a.indexOf("(")),e=a.substring(a.indexOf("(")+1,a.length-1);if(e=e.split(","),isNaN(b)){var f=(b.substring(0,b.indexOf("(")),b.substring(b.indexOf("(")+1,b.length-1));f=f.split(",");for(var g=0,h=e.length;h>g;g++)"add"==c?e[g]=1*e[g]+1*f[g]:"sub"==c?e[g]=1*e[g]-1*f[g]:"mult"==c?e[g]=e[g]*f[g]:"divide"==c&&(e[g]=e[g]/f[g])}else for(var g=0,h=e.length;h>g;g++)"add"==c?e[g]=1*e[g]+b:"sub"==c?e[g]=1*e[g]-b:"mult"==c?e[g]=e[g]*b:"divide"==c&&(e[g]=e[g]/b);return d+"("+e.join(",")+")"}function F(a,b){return 1*a+1*b}function G(a,b){return 1*a-1*b}function H(a,b){return a*b}function I(a,b){return a>b?1:b>a?-1:0}function J(a,b,c,d){return setInterval(function(){a.apply(c,b)},d||10)}function K(a,b,c){clearInterval(a),b&&b.apply(null,c)}function L(a){return a}function M(a){switch(a){case"linear":return L}return L}function N(a,b){var c=k(b.prop),d=l(b.prop),e=m(b.prop),f=n(b.prop),g=d(b.stop,b.start),h=f(b.stop,b.start),i=0,j=0,o=J(function(a,d){i=M(self.animate_method||b.animate_method)(j/b.duration);var k=c(b.start,e(g,i));j+=1,j>b.duration||(h>=0?f(k,b.stop)>=0:f(k,b.stop)<0)?K(o,b.callback,b.callback_args):O(a,d,k)},[a,b.prop,b.stop],null,1);return o}function O(a,b,c,d){return c?(d?a.setAttributeNS(d,b,c+""):a.setAttribute(b,c+""),void 0):d?a.getAttributeNS(d,b):a.getAttribute(b)}function P(a,b,c){var d=Z.createElementNS(a,b.tag);c&&"string"==typeof c&&(d.textContent=c);for(var e in b)"tag"!=e&&"other"!=e&&"original"!=e&&O(d,e,b[e]);return d}function Q(a,b,c){"object"==typeof b?e(b,function(b,c){a.style[c]=b}):a.style[b]=c}function R(a){return a.metrics={},a.metrics.sum=0,e(a,function(b,c){if("metrics"!=c){var d=b;a.metrics.sum+=d,a.metrics.max=a.metrics.max>d?a.metrics.max:d,a.metrics.min=a.metrics.min<d?a.metrics.min:d}}),a.metrics.avg=a.metrics.sum/a.length,a}function S(a){var b=[];return a.analyzed_data.length>0?e(a.dom,function(d,f){var h=[];e(a.shapes,function(b,d){var i=[];e(a.analyzed_data,function(h,j){if("metrics"!=j&&"type"!=j){var k={};e(b,function(a,b){k[b]="object"==typeof a?c(g(a)?[]:{},a):a}),k.data=h,k.dataIndex=j;var l=a.queue[f]?a.queue[f][d]?a.queue[f][d][j]:null:null;l&&a.queue[f][d].length==a.analyzed_data.length&&(k._el=l._el,k.from=k.from||{},e(l,function(a,b){k.from[b]=a})),i.push(k)}}),h.push(i)}),b.push(h)}):e(a.dom,function(){var d=[],f=[];e(a.shapes,function(a){var b={};e(a,function(a,d){b[d]="object"==typeof a?c(g(a)?[]:{},a):a}),f.push(b)}),d.push(f),b.push(d)}),b}function T(a){a.analyzed_data.type&&"linear"!=a.analyzed_data.type||(a.queue=S(a))}function U(a,b,c,d,g,h,i){var j;a.from=a.from||{},e(a,function(b,c){"other"!=c&&"from"!=c&&(a.from[c]=a.from[c]||b)}),"pie"==a._tag?a=V(a,b,c,d,i):e(g,function(b,d){j=X(a.tag),a[j[d]]=f(b)?b(a[j[d]],c,i,a):m(j[d])(a[j[d]],c)})}function V(a,b,c,d,e){var f=Math.PI,h=f/180,i=a.r,k=a.cx,l=a.cy,m=b&&b.angleEnd?b.angleEnd:0,n=m+360*c/d.metrics.sum,o=k+i*Math.cos(-m*h),p=k+i*Math.cos(-n*h),q=l+i*Math.sin(-m*h),r=l+i*Math.sin(-n*h);return a.angleStart=m,a.angleEnd=n,a.d=["M"+k,l+"L"+o,q+"A"+i,i,0,+(n-m>180),0,p,r+"z"].join(","),a.from.d=a.from.d.split(","),a.from.d[5]=+(n-m>180),a.from.d=a.from.d.join(","),a.fill=(g(a.fill)?a.fill[e]:j())||(a.other.rainbow?j():cb.fill),a}function W(a){a.other.events=a.other.events||{},a.other.events.mouseover=function(a,b){var c=(b.other.hoverBounce.offset||b.other.hoverBounce)/10,d=b.cx*-1/10*c,e=b.cy*-1/10*c;b._currentAnimation=N(b._el,{prop:"transform",start:b._el.originalTransform||"matrix(1, 0, 0, 1, 0, 0)",stop:"matrix(1."+c+", 0, 0, 1."+c+", "+d+","+e+")",duration:b.other.hoverBounce.duration||200})},a.other.events.mouseout=function(a,b){b._currentAnimation&&K(b._currentAnimation),b._currentAnimation=N(b._el,{prop:"transform",start:O(b._el,"transform"),stop:"matrix(1, 0, 0, 1, 0, 0)",duration:b.other.hoverBounce.duration||200})}}function X(a){switch(a){case"circle":return fb;case"rect":return ib;case"path":return jb;case"line":return eb;case"polygon":return hb;case"polyline":return gb}}var Y=a,Z=b;Z.documentElement;var $="http://www.w3.org/2000/svg",_="1.1";Y.loupe=function(a,b){if(!(this instanceof loupe)){var c=new loupe;return c.dom=g(a)?a:a.nodeName?[a]:c.query(a),c.shapes=[],c.queue=[],c.data_points=[],c.analyzed_data=[],b&&(c.width=b.width,c.height=b.height),c}},d(loupe,{sEngine:a.peppy?peppy.query:h,query:function(a,b){return this.sEngine(a,b)}}),d(loupe,{on:function(){},un:function(){}});var ab={white:"#FFFFFF",red:"#FF0000",black:"#000000",green:"#00FF00",yellow:"#FFFF00",blue:"#0000FF"};d(loupe,{animate:function(a){var b=this;return b.animate_on=!0,b.animate_method="linear",b.animate_duration=200,a&&(b.animate_synchronous=a.synchronous||!1,b.animate_method=a.easing||"linear",b.animate_properties=a.props,b.animate_duration=a.duration||200),b}}),d(loupe,{data:function(a,b){b=b||{};var c=this,d=[],f="function"==typeof b.reader?b.reader:function(a){return{value:a}};return c.original_data=a,b.type&&"linear"!=b.type||(e(a,function(a){d.push(f(a).value)}),c.data_points=b.replace?d:c.data_points.concat(d),c.analyzed_data=R(c.data_points),c.analyzed_data.type=b.type||"linear"),c}}),d(loupe,{transform:function(a,b){var c=this,d={};return T(c),e(c.queue,function(f){e(f,function(f){e(f,function(e,f,g){switch(a){case"linear":U(e,d[e._tag||e.tag],c.analyzed_data[g],c.analyzed_data,b,c.engine,g);break;case"tree":}d[e._tag||e.tag]=e})})}),c}}),d(loupe,{draw:function(a){var b=this;return b.engine=b.engine||"svg","svg"==b.engine?b.draw_svg(a):b}});var bb={stroke:"stroke-width",strokeColor:"stroke",color:"fill",transform:"transform","class":"class",style:"style"},cb={fill:"#FFF"},db=c({x:"x",y:"y",dx:"dx",dy:"dy",textAnchor:"text-anchor",rotate:"rotate",textLength:"textLength",lengthAdjust:"lengthAdjust"},bb);d(loupe,{text:function(a){var b=this,c={tag:"text",other:{}};for(var d in a){var e=db[d];e?c[e]=a[d]:"position"==d?c.transform="translate("+a[d]+")":"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),T(b),b}});var eb=c({x1:"x1",x2:"x2",y1:"y1",y2:"y2"},bb);d(loupe,{line:function(a){var b=this,c={tag:"line",other:{}};for(var d in a){var e=eb[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),T(b),b}});var fb=c({centerX:"cx",centerY:"cy",radius:"r"},bb);d(loupe,{circle:function(a){var b=this,c={tag:"circle",other:{}};for(var d in a){var e=fb[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),T(b),b}});var gb=c({points:"points"},bb);d(loupe,{polyline:function(a){var b=this,c={tag:"polyline",other:{}};for(var d in a){var e=gb[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),T(b),b}});var hb=c({points:"points"},bb);d(loupe,{polygon:function(a){var b=this,c={tag:"polygon",other:{}};for(var d in a){var e=hb[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),T(b),b}});var ib=c({x:"x",y:"y",rx:"rx",ry:"ry",width:"width",height:"height"},bb);d(loupe,{rect:function(a){var b=this,c={tag:"rect",other:{}};for(var d in a){var e=ib[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return b.shapes.push(c),T(b),b}});var jb=c({centerX:"cx",centerY:"cy",radius:"r",d:"d",moveTo:"M",arcTo:"A",lineTo:"L",curveTo:"C"},bb);d(loupe,{path:function(a){var b=this,c={tag:"path",other:{}};for(var d in a){var e=jb[d];e?c[e]=a[d]:"from"==d?c.from=a[d]:c.other[d]=a[d]}return c.d||(c.d="",c.M&&(c.d="M"+c.M),c.A&&(c.d+="A"+c.A),c.L&&(c.d+="L"+c.L),c.C&&(c.d+="C"+c.C),c.d+="Z"),b.shapes.push(c),T(b),b}});var kb=c({},jb);d(loupe,{pie:function(a){var b=this,d={tag:"path",_tag:"pie",other:{}};for(var e in a){var f=kb[e];f?d[f]=a[e]:"from"==e?d.from=c({},a[e]):d.other[e]=a[e]}return d.d||(d.d="M0,0L0,0A0,0,0,0,0,0,0z"),d.other.hoverBounce&&W(d),b.shapes.push(d),T(b),b}}),d(loupe,{draw_svg:function(a){var b=this;return e(b.queue,function(a){e(a,function(a){e(a,function(a){a.from&&e(a.from.currentAnimation,function(a){K(a)})})})}),e(b.queue,function(d,f,h){var j=b.dom[h],k=b.sEngine("svg",j)[0];(b.width||b.height)&&Q(j,{width:b.width,height:b.height}),k||(k=P($,{tag:"svg",version:_,width:b.width||"100%",height:b.height||"100%"}),j.appendChild(k)),e(d,function(d){e(d,function(d){if(a||b.animate_on||d.other.animate){var f,h,j=a||(d.other?d.other.animate||b:b);d._el?(f=d._el,e(f.attributes,function(a){d.from[a.nodeName]=a.nodeValue}),h=c({},d.from)):(h=c({},d.from),e(h,function(a,b){g(a)&&(h[b]=a[d.dataIndex]||cb[b])}),e(d,function(a,b){h[b]||(h[b]=cb[b]||a)}),f=P($,h),k.appendChild(f)),d._el=f,e(d.other.events,function(a,b){i(f,b,function(b){a(b,d)})}),d.currentAnimation=d.currentAnimation||{},e(d,function(a,b){if(b in{cx:null,cy:null,r:null,d:null,fill:null,x:null,y:null,width:null,height:null,x1:null,x2:null,y1:null,y2:null}){var c,e;c=h[b]?h[b]||d[b]:g(d[b])?d[b][d.dataIndex]||d[b]:d[b],e=g(d[b])?d[b][d.dataIndex]:d[b],d.currentAnimation[b]=N(f,{prop:b,start:c||cb[b]||0,stop:e||cb[b]||0,duration:j.animate_duration||400,animate_method:j.animate_method})}})}else{e(d,function(a,b){g(a)&&(d[b]=a[d.dataIndex]||cb[b]||0)});var f=P($,d,d.other?d.other.content:null);k.appendChild(f),d._el=f,e(d.other.events,function(a,b){i(f,b,function(b){a(b,d)})}),b.queue=[]}})})}),b}})}(window,document);
/*
//@ sourceMappingURL=dist/loupe.min.map
*/